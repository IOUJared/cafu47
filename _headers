/*
  This file defines custom HTTP headers for your Cloudflare Pages site.
*/

/* The path to apply these headers to. /* means all pages. */
/*
  # Security-focused headers
  X-Frame-Options: SAMEORIGIN
  X-Content-Type-Options: nosniff
  Referrer-Policy: strict-origin-when-cross-origin

  # Permissions Policy for embedded features
  # This version correctly allows both the video and chat frames to use required permissions.
  Permissions-Policy: autoplay=(self https://player.twitch.tv), fullscreen=(self https://player.twitch.tv https://www.twitch.tv)

  # Content Security Policy (CSP)
  # This version adds the domains needed for Twitch's analytics, ads, and other third-party scripts.
  Content-Security-Policy:
    default-src 'self';
    script-src 'self' https:;
    style-src 'self' 'unsafe-inline';
    frame-src 'self' https://player.twitch.tv https://www.twitch.tv;
    connect-src 'self' https: wss:;
    img-src 'self' data: https:;
    media-src blob: https:;
