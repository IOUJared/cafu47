/*
  This file defines custom HTTP headers for your Cloudflare Pages site.
*/

/* The path to apply these headers to. /* means all pages.
*/
/*
  # Security-focused headers
  X-Frame-Options: SAMEORIGIN
  X-Content-Type-Options: nosniff
  Referrer-Policy: strict-origin-when-cross-origin

  # Permissions Policy for embedded features
  # This version explicitly allows the Twitch player and chat frames to autoplay and go fullscreen.
*/
Permissions-Policy: autoplay=(self "https://player.twitch.tv"), fullscreen=(self "https://player.twitch.tv" "https://www.twitch.tv")

  # Content Security Policy (CSP)
  # This version explicitly adds all the domains that were being blocked in the console logs.
Content-Security-Policy:
    default-src 'self';
    script-src 'self' https://embed.twitch.tv https://static.cloudflareinsights.com https://d2v02itv0y9u9t.cloudfront.net https://sb.scorecardresearch.com https://cdn.frankerfacez.com https://cdn.betterttv.net https://cdn.7tv.app;
    style-src 'self' 'unsafe-inline' https://cdn.frankerfacez.com https://cdn.betterttv.net https://cdn.7tv.app;
    frame-src 'self' https://player.twitch.tv https://www.twitch.tv;
    connect-src 'self' https: wss: https://api.frankerfacez.com https://api.betterttv.net https://api.7tv.app;
    img-src 'self' data: https: https://cdn.frankerfacez.com https://cdn.betterttv.net https://cdn.7tv.app;
    media-src blob: https:;
    font-src 'self' https: data:;
