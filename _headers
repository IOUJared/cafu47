/*
  This file defines custom HTTP headers for your Cloudflare Pages site.
*/

/* The path to apply these headers to. '/*' means all pages. */
/*
  # Security-focused headers
  X-Frame-Options: SAMEORIGIN
  X-Content-Type-Options: nosniff
  Referrer-Policy: strict-origin-when-cross-origin

  # Permissions Policy for embedded features
  Permissions-Policy: autoplay=(self "https://player.twitch.tv"), fullscreen=(self "https://player.twitch.tv")

  # Content Security Policy (CSP)
  # This version adds sentry.io to the connect-src directive to allow Twitch's internal error reporting.
  Content-Security-Policy:
    default-src 'self';
    script-src 'self' https://embed.twitch.tv https://static.cloudflareinsights.com;
    style-src 'self' 'unsafe-inline';
    frame-src 'self' https://player.twitch.tv https://www.twitch.tv;
    connect-src 'self' https://*.twitch.tv wss://*.twitch.tv https://*.twitchcdn.net https://api.twitch.tv https://sentry.io;
    img-src 'self' data: https://static-cdn.jtvnw.net https://*.twitch.tv;
    media-src blob: https://*.twitchcdn.net;